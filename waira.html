<!DOCTYPE HTML>
<!--
	Arcana by HTML5 UP
	html5up.net | @ajlkn
	Free for personal and commercial use under the CCA 3.0 license (html5up.net/license)
-->
<html lang="es" xml:lang="es">
	<head>
		<title>🦜 TricahuePool</title>
		<meta charset="utf-8" />
		<meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no" />
		<link rel="stylesheet" href="assets/css/main.css" />
	</head>
	<body class="is-preload">
		<div id="page-wrapper">

			<!-- Header -->
				<div id="header">

					<!-- Logo -->
						<h1><a id="logo">🦜 Programas</a></h1>

					<!-- Nav -->
					<nav id="nav">
						<ul>
							<li ><a href="index.html">Inicio</a></li>
							<li>
								<a >Informacion y Tutoriales</a>
								<ul>
									<li><a >Sobre Delegacion</a>
										<ul>
											<li><a href="queesladelegacion.html">¿Que es la delegacion?</a></li>
											<li><a href="comodelegar.html">¿Como Puedo Delegar?</a></li>
										</ul>
									</li>
									<li><a>Tutoriales Tecnicos</a>
										<ul>
											<li><a href="compcardanonode.html">Compilando cardano-node</a></li>
											<li><a href="tjormunsystemd.html">Jormungandr con Systemd</a></li>
											<li><a href="configopenssh.html">Mejorar la Seguridad en OpenSSH</a></li>
								 <li><a href="iniciardaedalusconnodos.html">Iniciar Daedalus Testnet con/sin trusted peers</a></li>
										</ul>
									</li>
								</ul>
							</li>
							<li class="current"><a >Mis Programas</a>
							<ul>
								<li><a href="waira.html">Waira</a></li>
							</ul>
							</li>
							<li><a>Sobre TricahuePool</a>
								<ul>
								<li><a href="activitynews.html">Actividad del Pool</a></li>	
								<li><a href="mimaquina.html">Mi Pool</a></li>
								</ul>
							</li>
						</ul>
					</nav>

				</div>

			<!-- Main -->
				<section class="wrapper style1">
					<div class="container">
						<div id="content">

							<!-- Content -->

								<article>
									<header>
										<h2>Waira</h2>
										<p>Un Bot para gestionar tu Pool en linux.</p>
									</header>

									<span class="image featured"><img src="images/wairabanner2.jpg" alt="" /></span>

									<p>Waira es un Bot escrito en C++ diseñado para distribuciones linux x86_64, trabaja en conjunto con el jcli y jormungandr este ultimo debe correr bajo <a href="tjormunsystemd.html">Systemd</a>. El Bot esta diseñado para mantener el nodo activo frente a inestabilidades de la red (cuelgues) y actualizado cuando sale una nueva versión del jormungandr, además posee una integración con pooltool para poder enviar tus Slots y HeightBlock a su pagina.
										El Bot consta de un ejecutable "waira" y un archivo de configuración "waira.conf".</p>
										
										
										<p>El Código para compilar este programa lo puedes descargar de Github.</p>
										<div class="box highlight">
											<i class="icon brands fa-github"></i>
											<h3> <a href="https://github.com/Exteroqs/Waira">Github "Repo Waira"</a> </h3>
										</div>

										<blockquote>
										<p>Waira debe ir en la misma carpeta donde se encuentra el jormungandr y el jcli, para que las actualizaciones automáticas funcionen.</p>
										<p>Jormungandr debe correr como un servicio bajo <a href="tjormunsystemd.html">Systemd</a>, el nombre del servicio debe llamarse "jormungandr.service", para que Waira pueda funcionar</p>
										</blockquote>

										<h3> <ins>Correr Jormungandr con Systemd</ins> </h3>
										<p>Antes de ejecutar Waira, será necesario tener a Jormungandr como un servicio del sistema, esto se logra por medio de Systemd, la nueva versión de Waira tiene la capacidad de crear el servicio para el jormungandr automáticamente, la forma de correlo lo puedes ver mas adelante, en el apartado de Ejecución.</p> 
										<p> Si deseas crear manualmente el servicio lo puedes leer en el manual que está <a href="tjormunsystemd.html">aqui</a>. 
											Al tener a Jormungandr como un servicio del sistema, facilita a Waira la interacción con él, permitiendo entre otras cosas, la acción de poder auto actualizarlo  cuando se liberan nuevas actualizaciones. Además, al ser un servicio del sistema este funcionara en segundo plano, siendo de ayuda para personas que acceden a sus servidores por SSH.
											</p>
										<h3> <ins>Sobre el archivo de configuración waira.conf</ins> </h3>
										<p>Es un archivo de configuración en formato JSON, si al momento de ejecutar waira no se encuentra el archivo de configuración este creara uno por defecto. Sus parámetros son los siguientes:</p>
										<blockquote>waira.conf debe estar en la misma carpeta donde se encuentra el ejecutable waira.</blockquote>
										<p><strong>actualizaciones_automaticas</strong>: Es una opción booleana, un "true" habilita las actualizaciones automáticas y un "false" deshabilita las actualizaciones automáticas.</p>
										<p><strong>intervalo_tiempo_consulta_actualizaciones_automaticas</strong>: Indica en minutos, cada cuanto tiempo se realizara una comprobación de actualizaciones, por defecto son 60 minutos.</p>
										<p><strong>sendtip_pooltool</strong>: Esta es una opción booleana , un "true" habilita el envió de tu heightblock y slots a pooltool y un "false" deshabilita el envió.</p>
										<p><strong>poolID</strong>: Aquí debes indica la id de tu pool.</p>
										<p><strong>userIDpooltool</strong>: Aqui debes indicar el id de tu usuario de pooltool.</p>
										<p><strong>port_rest:</strong> Aquí se debe indicar el puerto de tu rest.</p>
										<p><strong>intervalo_tiempo_consulta_rest</strong>: Indica en minutos, cada cuanto tiempo se realizara una consulta al rest para revisar los datos del pool, por defecto son 1 minutos.</p>
										<p><strong>retraso_tiempo_bloque_maximo_permitido</strong>: Indica en minutos, cuanto es el tiempo máximo de retraso permitido entre el bloque recibido y el tiempo de la máquina, si el tiempo es excedido, el pool se reinicia. Este sistema se usa en los casos en el que el pool quede pegado en algún bloque debido a un fork o por inestabilidad de la red. Por defecto son 6 minutos.</p>
										<p>La configuración debería verse como en la imagen de abajo.</p>
										<span class="image featured"><img src="images/wairaconf.jpg" alt="" /></span>
										<h3> <ins>Ejecución de Waira</ins> </h3>
										<p>Antes de ejecutar el programa es necesario ubicar el ejecutable "waira" (el que se obtuvo de la compilación) dentro de la carpeta donde se encuentra el jormungandr y el jcli. Para ejecutar Waira debes hacerlo en modo administrador para que pueda interactuar con Systemd.</p>
										<p><code>sudo ./waira</code></p>
										<p>En caso de que falte algún requisito para poder funcionar correctamente el programa lo indicara al inicio de éste, como se ve en este ejemplo.  </p>
										<p style="background-color: beige"><code>      ****Iniciando Waira**** <br>
											-Programa de Gestión para Nodos de Cardano en Linux- <br>
											<br>
											Unit jormungandr.service could not be found. <br>
											* No se encontro el servicio jormungandr.service en systemd <br>
											</code></p>
										<p>Si todo funciona ok, te preguntara si deseas que cree el servicio para el jormungandr por ti, si es que aún no lo tienes creado, para ello deberás tener tu jormungandr corriendo en paralelo para que el Bot pueda copiar tu configuración e incluirla en la creación del servicio. Solo deberás aceptar con "s", luego ENTER y listo el Bot hará todo por ti, tal como se ve a continuación:</p> 
										<span class="image featured"><img src="images/wairaservicio.jpg" alt="" /></span>
										<p>Como se puede apreciar, al momento que se crea el servicio en Systemd tu proceso del jormungandr que tenías corriendo se detiene automáticamente. Ahora en este momento el jormungandr se encuentra corriendo como un servicio del sistema, puedes ver su estado con:</p>
										<p><code>sudo systemctl status jormungandr</code></p>
										<p>Para detener tu servicio jormungandr es con:</p>
										<p><code>sudo systemctl stop jormungandr</code></p>
										<p>Para volver a iniciar tu servicio jormungandr </p>
										<p><code>sudo systemctl start jormungandr</code></p>
										<blockquote> Si deseas por ejemplo actualizar los binarios del jormungandr, solo debes detener el servicio, reemplazas los binarios de tu directorio por los nuevos y luego inicias el servicio nuevamente. Como vez sera mucho mas simple ahora trabajar con él siendo es un servicio.</blockquote>
										<p>Luego de crear el servicio en caso de que no exista el archivo de configuración de Waira, este será creado, luego el Bot te pedira que lo abras para que lo edites y pongas la configuración de tu preferencia, por ejemplo tus configuraciones para pooltool. Después de ello ya puedes volver a iniciar Waira y se deberia ver como acontinuación:</p>
										<p style="background-color: beige">     ****Iniciando Waira**** <br>
											-Programa de Gestion para Nodos de Cardano en Linux- <br>
											<br>
											* El servicio jormungandr.service en systemd existe <br>
											* Jcli encontrado <br>
											* Archivo de configuracion "waira.conf" encontrado <br>
											* Proceso de configuracion terminado * <br>
											<br>
												  **Comenzando monitoreo** <br>
											----------jormungandr 0.8.14-9ca427ef------------ <br>
											 El Pool Funciona Bien <br>
											 Mi lastBlockDate: 90.6518  (15% Epoca Completada) <br>
											 Mi HeightBlock: 298928   |  Pooltool HeightBlock:298929 <br>
											 Tiempo en linea: 53701 segundos <br>
											 % de Tiempo Operativo por Epoca: <br>
											 Detectada Nueva Epoca, Reiniciando el Conteo <br>
											------------------------------------------------- <br>
											</p>
										<p>Para detener el programa solo debes presionar CRTL+C y este se cerrara.</p>
										<p>Una vez que ves que todo funciona bien, si lo deseas, puedes dejar a Waira corriendo en segundo plano con: </p>
										<p><code>sudo ./waira>waira.log &</code></p>
										<p>De esta manera estamos guardando todos los registros del programa que suceden en segundo plano en el archivo waira.log, ahora en la terminal haciendo un "cat" en el archivo waira.log podremos ver todo lo registrado.</p>
										<p><code>cat waira.log</code></p>
										<p>Obtendrás algo similar a la imagen de abajo.</p>
										<span class="image featured"><img src="images/catwaira.jpg" alt="" /></span>
										<h3>Detener el proceso de segundo plano</h3>
										<p>Si deseas eliminar el proceso que está en segundo plano puedes usar htop para encontrarlo y eliminarlo, lo puedes abrir escribiendo htop en la terminal, si no está disponible deberás instalarlo con un simple:</p>
										<p><code>sudo apt install htop</code></p>
										<p>Ahora que ya lo tienes instalado, lo haces correr desde la terminar en modo administrador.</p>
										<p><code>sudo htop</code></p>
										<p>Para buscar nuestro proceso oprimes F4 y escribe "./waira" tal como se ve en la imagen.</p>
										<span class="image featured"><img src="images/htopwaira.jpg" alt="" /></span>
										<p>Ahora que lo encontraste presiona ENTER para seleccionar, luego oprimes F9 para seleccionar el modo KILL que es para detener procesos, éste despliega un menú de opciones puedes elegir el que se ve en la imagen.</p>
										<span class="image featured"><img src="images/htopkill.jpg" alt="" /></span>
										<p>Oprimes ENTER y listo, si lo buscas nuevamente ya no debería estar.</p>
										<blockquote>
											<p>Para salir de htop debes apretar la tecla q</p>
											<p>Dentro de las características que deseo agregar a futuro es implementar una protección frente ataques ddos.</p>
								</blockquote>
								<blockquote>Si deseas apoyarme para seguir creando más contenido en español, puedes hacerlo delegando en mi Pool. </blockquote>
									</article>

					
							</div>
						</div>
					</section>
	
				<!-- Footer -->
					<div id="footer">
															<!-- Icons -->
															<ul class="icons">
																<li><a href="https://github.com/Exteroqs/Waira" class="icon brands fa-github"><span class="label">GitHub</span></a></li>
																<li><a href="mailto:tricahuepool@protonmail.com" class="icon social fa-envelope"><span class="label">E-Mail</span></a></li>
																<li><a href="https://vimeo.com/tricahuepool" class="icon brands fa-vimeo"><span class="label">Vimeo</span></a></li>
																<li><a href="https://twitter.com/TCHPool" class="icon brands fa-twitter"><span class="label">Twitter</span></a></li>
															</ul>
						<!-- Copyright -->
						<div class="copyright">
							<ul class="menu">
								<li>&copy; TricahuePool 2019. All rights reserved</li><li>Design: <a href="http://html5up.net">HTML5 UP</a>
							</ul>
						</div>
	
					</div>
	
			</div>
	
			<!-- Scripts -->
				<script src="assets/js/jquery.min.js"></script>
				<script src="assets/js/jquery.dropotron.min.js"></script>
				<script src="assets/js/browser.min.js"></script>
				<script src="assets/js/breakpoints.min.js"></script>
				<script src="assets/js/util.js"></script>
				<script src="assets/js/main.js"></script>
	
		</body>
	</html>